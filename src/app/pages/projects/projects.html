<div class="projects-page">
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">{{ translate('projects.title') }}</h1>
      <p class="page-subtitle">{{ translate('projects.subtitle') }}</p>
    </div>
    
    @if (projects.length === 0) {
      <div class="empty-state">
        <div class="empty-state-icon">
          <i class="bi bi-code-slash"></i>
        </div>
        <h2 class="empty-state-title">{{ translate('projects.empty.title') }}</h2>
        <p class="empty-state-message">{{ translate('projects.empty.message') }}</p>
        <a [href]="personalInfo.github" target="_blank" class="btn-custom btn-primary-custom">
          <i class="bi bi-github me-2"></i>
          {{ translate('projects.empty.button') }}
        </a>
      </div>
    } @else {
      <div class="projects-grid">
        @for (project of projects; track project.id) {
          <article class="project-card" [class.coming-soon-card]="!project.title">
            <div class="project-image">
              @if (project.images && project.images.length > 0) {
                <!-- Carousel para múltiplas imagens -->
                <div class="carousel-container">
                  <img [src]="project.displayImage" [alt]="project.title">
                  @if (project.images.length > 1) {
                    <button class="carousel-btn carousel-prev" 
                            (click)="prevImage(project.id, project.images.length)"
                            aria-label="Imagem anterior">
                      <i class="bi bi-chevron-left"></i>
                    </button>
                    <button class="carousel-btn carousel-next" 
                            (click)="nextImage(project.id, project.images.length)"
                            aria-label="Próxima imagem">
                      <i class="bi bi-chevron-right"></i>
                    </button>
                    <div class="carousel-indicators">
                      @for (img of project.images; track $index) {
                        <span class="indicator" 
                              [class.active]="currentImageIndex[project.id] === $index"></span>
                      }
                    </div>
                  }
                </div>
              } @else {
                <!-- Imagem única -->
                <img [src]="project.imageUrl" [alt]="project.title">
              }
            </div>
            
            <div class="project-content">
              @if (project.title) {
                <h3 class="project-title">{{ project.title }}</h3>
              }
              <p class="project-description" [class.coming-soon-text]="!project.title">{{ project.description }}</p>
              
              @if (project.technologies.length > 0) {
                <div class="project-tech">
                  @for (tech of project.technologies; track tech) {
                    <span class="tech-tag">{{ tech }}</span>
                  }
                </div>
              }
            </div>
          </article>
        }
      </div>

      <div class="projects-footer">
        <p class="text-muted mb-3">{{ translate('projects.moreOnGithub') }}</p>
        <a [href]="personalInfo.github" target="_blank" class="btn-custom btn-outline-custom">
          <i class="bi bi-github me-2"></i>
          {{ translate('projects.viewMore') }}
        </a>
      </div>
    }
  </div>
</div>
